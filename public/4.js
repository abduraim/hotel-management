(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{196:function(t,n,e){"use strict";e.r(n);var a=e(0),o=e(6),c={name:"ContactsIndex",data:function(){return{isLoading:!1,contactsList:[],needleStr:"",findTimer:null,paginatorData:{total:0,perPage:0,currentPage:1}}},methods:{mobileContactActionClick:function(t){switch(console.log(t),t.action){case"call":this.callContact(t.contact.phone);break;case"email":this.mailContact(t.contact.email);break;case"edit":this.$router.push({name:"contacts-edit",params:{id:t.contact.id}});break;case"delete":this.deleteContact(t.contact)}},test:function(){console.log("tst")},getContacts:function(){var t=this;this.isLoading=!0;var n={page:this.paginatorData.currentPage};""!=this.needleStr&&(n.needleStr=this.needleStr),o.a.getContactsPaginated(n).then((function(n){t.contactsList=n.data.data,t.paginatorData.total=n.data.total,t.paginatorData.perPage=n.data.per_page,t.paginatorData.currentPage=n.data.current_page,t.isLoading=!1}))},searchContact:function(){if(null!=this.findTimer)return!1;var t=this;this.findTimer=setTimeout((function(){t.getContacts(),t.findTimer=null}),500)},paginatorPageChange:function(t){this.paginatorData.currentPage=t,window.scrollTo(0,0),this.getContacts()},deleteContact:function(t){var n=this;this.$confirm("Вы действительно хотите удалить контакт ".concat(t.name,"?"),"Удаление контакта",{confirmButtonText:"Да",cancelButtonText:"Отмена",type:"warning"}).then((function(){n.isLoading=!0,o.a.deleteContact(t.id).then((function(t){n.isLoading=!1,t&&(a.a.showSuccessMessage("Контакт успешно удален!"),n.getContacts())}))})).catch((function(){}))},callContact:function(t){window.location="tel:".concat(t)},mailContact:function(t){window.location="mailto:".concat(t)}},mounted:function(){this.getContacts()}},i=(e(98),e(1)),r=Object(i.a)(c,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("el-container",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],attrs:{direction:"vertical"}},[e("h3",[t._v("Контакты")]),t._v(" "),e("div",{staticClass:"controls"},[e("el-button",{attrs:{circle:"",icon:"el-icon-plus",type:"primary",title:"Добавить контакт"},on:{click:function(n){return t.$router.push({name:"contacts-create"})}}})],1),t._v(" "),e("el-input",{staticClass:"search-input",attrs:{"prefix-icon":"el-icon-search",placeholder:"Введите имя, либо фамилию для поиска",clearable:""},on:{input:t.searchContact},model:{value:t.needleStr,callback:function(n){t.needleStr=n},expression:"needleStr"}}),t._v(" "),e("div",{staticClass:"card-list"},t._l(t.contactsList,(function(n){return e("el-card",{key:n.id,staticClass:"contact-card",on:{click:t.test}},[e("div",{staticClass:"name-block"},[t._v("\n                "+t._s(n.name)+" "+t._s(n.surname)+"\n            ")]),t._v(" "),e("div",{staticClass:"actions-block"},[e("el-button-group",{staticClass:"hidden-xs-only"},[n.phone?e("el-button",{attrs:{circle:"",icon:"el-icon-phone",type:"success",title:"Позвонить"},on:{click:function(e){return t.callContact(n.phone)}}}):t._e(),t._v(" "),n.email?e("el-button",{attrs:{circle:"",icon:"el-icon-message",type:"primary",title:"Написать email"},on:{click:function(e){return t.mailContact(n.email)}}}):t._e(),t._v(" "),e("el-button",{attrs:{circle:"",icon:"el-icon-edit",type:"warning",title:"Редактировать"},on:{click:function(e){return t.$router.push({name:"contacts-edit",params:{id:n.id}})}}}),t._v(" "),e("el-button",{attrs:{circle:"",icon:"el-icon-delete",type:"danger",title:"Удалить контакт"},on:{click:function(e){return t.deleteContact(n)}}})],1),t._v(" "),e("el-dropdown",{staticClass:"hidden-sm-and-up",attrs:{type:"primary"},on:{command:t.mobileContactActionClick}},[e("el-button",{attrs:{icon:"el-icon-more",type:"primary"}}),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n.phone?e("el-dropdown-item",{attrs:{icon:"el-icon-phone",command:{action:"call",contact:n}}},[t._v("Позвонить")]):t._e(),t._v(" "),n.email?e("el-dropdown-item",{attrs:{icon:"el-icon-message",command:{action:"email",contact:n}}},[t._v("Написать email")]):t._e(),t._v(" "),e("el-dropdown-item",{attrs:{icon:"el-icon-edit",command:{action:"edit",contact:n}}},[t._v("Редактировать")]),t._v(" "),e("el-dropdown-item",{attrs:{icon:"el-icon-delete",command:{action:"delete",contact:n}}},[t._v("Удалить контакт")])],1)],1)],1)])})),1),t._v(" "),e("el-pagination",{attrs:{background:"","pager-count":5,"hide-on-single-page":!0,layout:"prev, pager, next",total:t.paginatorData.total,"page-size":t.paginatorData.perPage,"current-page":t.paginatorData.currentPage},on:{"update:currentPage":function(n){return t.$set(t.paginatorData,"currentPage",n)},"update:current-page":function(n){return t.$set(t.paginatorData,"currentPage",n)},"current-change":t.paginatorPageChange}})],1)}),[],!1,null,null,null);n.default=r.exports},27:function(t,n,e){var a=e(99);"string"==typeof a&&(a=[[t.i,a,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};e(15)(a,o);a.locals&&(t.exports=a.locals)},98:function(t,n,e){"use strict";var a=e(27);e.n(a).a},99:function(t,n,e){(t.exports=e(14)(!1)).push([t.i,".search-input {\n  margin-bottom: 20px;\n}\n.card-list {\n  margin-bottom: 20px;\n}\n.contact-card .el-card__body {\n  display: flex;\n  justify-content: space-between;\n}\n.contact-card .el-card__body .name-block {\n  display: flex;\n  align-items: center;\n  margin-right: 20px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: clip;\n}\n.contact-card .el-card__body .actions-block {\n  display: flex;\n  align-items: center;\n}",""])}}]);